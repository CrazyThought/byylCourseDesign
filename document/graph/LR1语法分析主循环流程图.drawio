<?xml version="1.0" encoding="UTF-8"?>
<mxfile host="app.diagrams.net" modified="2025-12-12T12:00:00.000Z" agent="Mozilla/5.0" etag="lr1-main-loop" version="24.7.5" type="device">
  <diagram name="LR(1)语法分析主循环流程图">
    <mxGraphModel xmlns="http://www.mxgraph.com/mxgraph/model" dx="1200" dy="800" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        
        <!-- 开始节点 -->
        <mxCell id="start" value="开始" style="shape=rounded;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#000000;strokeWidth=2;fontColor=#000000;fontSize=14;align=center;verticalAlign=middle;rounded=1;arcSize=20" vertex="1" parent="1">
          <mxGeometry x="400" y="50" width="100" height="40" as="geometry" />
        </mxCell>
        
        <!-- 初始化节点 -->
        <mxCell id="init" value="初始化\n- 将初始状态0压入栈\n- 读取第一个输入符号a\n- 初始化输入指针i=0" style="shape=rectangle;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#000000;strokeWidth=2;fontColor=#000000;fontSize=12;align=center;verticalAlign=middle" vertex="1" parent="1">
          <mxGeometry x="350" y="120" width="200" height="80" as="geometry" />
        </mxCell>
        <mxCell id="edge1" value="" style="endArrow=classic;strokeWidth=2;strokeColor=#000000" edge="1" parent="1" source="start" target="init" />
        
        <!-- 主循环开始 -->
        <mxCell id="main_loop" value="主循环开始" style="shape=rectangle;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#000000;strokeWidth=2;fontColor=#000000;fontSize=12;align=center;verticalAlign=middle" vertex="1" parent="1">
          <mxGeometry x="375" y="230" width="150" height="40" as="geometry" />
        </mxCell>
        <mxCell id="edge2" value="" style="endArrow=classic;strokeWidth=2;strokeColor=#000000" edge="1" parent="1" source="init" target="main_loop" />
        
        <!-- 获取当前状态和输入符号 -->
        <mxCell id="get_state" value="获取当前状态s和输入符号a\n- s = 栈顶状态\n- a = 输入字符串[i]" style="shape=rectangle;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#000000;strokeWidth=2;fontColor=#000000;fontSize=12;align=center;verticalAlign=middle" vertex="1" parent="1">
          <mxGeometry x="325" y="300" width="250" height="60" as="geometry" />
        </mxCell>
        <mxCell id="edge3" value="" style="endArrow=classic;strokeWidth=2;strokeColor=#000000" edge="1" parent="1" source="main_loop" target="get_state" />
        
        <!-- 查找动作表 -->
        <mxCell id="look_action" value="查找LR(1)动作表\nAction[s, a]" style="shape=rectangle;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#000000;strokeWidth=2;fontColor=#000000;fontSize=12;align=center;verticalAlign=middle" vertex="1" parent="1">
          <mxGeometry x="350" y="390" width="200" height="40" as="geometry" />
        </mxCell>
        <mxCell id="edge4" value="" style="endArrow=classic;strokeWidth=2;strokeColor=#000000" edge="1" parent="1" source="get_state" target="look_action" />
        
        <!-- 动作类型判断 -->
        <mxCell id="action_type" value="动作类型判断" style="shape=diamond;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#000000;strokeWidth=2;fontColor=#000000;fontSize=12;align=center;verticalAlign=middle" vertex="1" parent="1">
          <mxGeometry x="350" y="460" width="200" height="60" as="geometry" />
        </mxCell>
        <mxCell id="edge5" value="" style="endArrow=classic;strokeWidth=2;strokeColor=#000000" edge="1" parent="1" source="look_action" target="action_type" />
        
        <!-- 接受动作 -->
        <mxCell id="accept" value="接受动作\n分析成功，结束" style="shape=rectangle;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#000000;strokeWidth=2;fontColor=#000000;fontSize=12;align=center;verticalAlign=middle" vertex="1" parent="1">
          <mxGeometry x="100" y="460" width="150" height="60" as="geometry" />
        </mxCell>
        <mxCell id="edge6" value="接受" style="endArrow=classic;strokeWidth=2;strokeColor=#000000;fontColor=#000000;fontSize=10;align=center;verticalAlign=middle" edge="1" parent="1" source="action_type" target="accept" />
        
        <!-- 移进动作 -->
        <mxCell id="shift" value="移进动作\n- 将a压入栈\n- 将状态j压入栈\n- i = i + 1，读取下一个输入符号" style="shape=rectangle;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#000000;strokeWidth=2;fontColor=#000000;fontSize=12;align=center;verticalAlign=middle" vertex="1" parent="1">
          <mxGeometry x="600" y="460" width="200" height="60" as="geometry" />
        </mxCell>
        <mxCell id="edge7" value="移进" style="endArrow=classic;strokeWidth=2;strokeColor=#000000;fontColor=#000000;fontSize=10;align=center;verticalAlign=middle" edge="1" parent="1" source="action_type" target="shift" />
        
        <!-- 归约动作 -->
        <mxCell id="reduce" value="归约动作\n- 归约产生式A→α\n- 弹出栈顶2*|α|个元素\n- 获取新状态s' = 栈顶状态\n- 查找Goto[s', A] = j\n- 将A压入栈\n- 将j压入栈" style="shape=rectangle;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#000000;strokeWidth=2;fontColor=#000000;fontSize=12;align=center;verticalAlign=middle" vertex="1" parent="1">
          <mxGeometry x="350" y="550" width="200" height="80" as="geometry" />
        </mxCell>
        <mxCell id="edge8" value="归约" style="endArrow=classic;strokeWidth=2;strokeColor=#000000;fontColor=#000000;fontSize=10;align=center;verticalAlign=middle" edge="1" parent="1" source="action_type" target="reduce" />
        
        <!-- 错误处理 -->
        <mxCell id="error" value="错误处理\n- 报告语法错误\n- 输出错误位置和信息\n- 分析失败，结束" style="shape=rectangle;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#000000;strokeWidth=2;fontColor=#000000;fontSize=12;align=center;verticalAlign=middle" vertex="1" parent="1">
          <mxGeometry x="600" y="550" width="200" height="60" as="geometry" />
        </mxCell>
        <mxCell id="edge9" value="错误" style="endArrow=classic;strokeWidth=2;strokeColor=#000000;fontColor=#000000;fontSize=10;align=center;verticalAlign=middle" edge="1" parent="1" source="action_type" target="error" />
        
        <!-- 结束节点 -->
        <mxCell id="end" value="结束" style="shape=rounded;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#000000;strokeWidth=2;fontColor=#000000;fontSize=14;align=center;verticalAlign=middle;rounded=1;arcSize=20" vertex="1" parent="1">
          <mxGeometry x="400" y="670" width="100" height="40" as="geometry" />
        </mxCell>
        <mxCell id="edge10" value="" style="endArrow=classic;strokeWidth=2;strokeColor=#000000" edge="1" parent="1" source="accept" target="end" />
        <mxCell id="edge11" value="" style="endArrow=classic;strokeWidth=2;strokeColor=#000000" edge="1" parent="1" source="error" target="end" />
        
        <!-- 循环边 -->
        <mxCell id="edge12" value="" style="endArrow=classic;strokeWidth=2;strokeColor=#000000" edge="1" parent="1" source="shift" target="main_loop" />
        <mxCell id="edge13" value="" style="endArrow=classic;strokeWidth=2;strokeColor=#000000" edge="1" parent="1" source="reduce" target="main_loop" />
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>